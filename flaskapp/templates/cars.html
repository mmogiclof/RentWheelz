{% extends "base.html" %}

{% block title %}Cars{% endblock %}
{% block content %}
    <div class="container-fluid mt-5">
        {% for car in cars %}
        {% if loop.index0 % 3 == 0 %}
        <div class="row pb-4">
        {% endif %}
            <div class="col-md-4">
                <div class="card" style="width: 25rem;">
                    {% if car.thumbnail %}
                      <img src="{{ car.thumbnail }}" class="card-img-top" alt="Thumbnail Image">
                    {% else %}
                      <img src="{{ url_for('static', filename='default-car.jpg') }}" class="card-img-top" alt="Thumbnail Image">
                    {% endif %}
                      <div class="card-body">
                        <h5 class="card-title">{{ car.model }}</h5>
                        <p class="card-text">{{ car.brand }}</p>
                        <p class="card-text">Rs. {{ car.price_per_hour }}/hr</p>
                        <button class="btn btn-primary" data-toggle="modal" data-target="#reservationModal" data-car-id="{{ car.id }}" data-car-model="{{ car.model }}">Reserve</button>
                    </div>
                </div>
            </div>
        {% if loop.index0 % 3 == 2 or loop.last %}
        </div>
        {% endif %}
        {% endfor %}
    </div>

    <div class="modal fade" id="reservationModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title font-weight-bold" id="exampleModalLabel">Modal title</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form action="bookings" method="post" id="bookingForm">
                <input type="hidden" class="car-id-input" name="car_id">
                <div class="form-group">
                    <label for="pick-up-date">Pick Up Date</label>
                    <input type="date" class="form-control" id="pick-up-date" name="pick-up-date" value="">
                </div>
                <div class="form-group">
                    <label for="return-date">Return Date</label>
                    <input type="date" class="form-control" id="return-date" name="return-date" value="">
                </div>
                <div class="form-group">
                    <label for="passengers">Passengers</label>
                    <input type="number" class="form-control" id="passengers" name="passengers" value="1" min="1" max="5">
                </div>

              </form>
            </div>
            <div class="modal-footer justify-content-start">
                <button id="reserve-btn" class="btn btn-primary">Reserve</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
      



{% endblock %}